export default function (component, product) {
    // load config
    let config = component.config || { enabled: true };
    config = JSON.parse(JSON.stringify(config));
    // load buttons
    const _onShareThisLoaded = window.onShareThisLoaded;
    let onload = () => {
        if (!onload.complete) {
            if (!config.id) {
                const id = 'sharethis-' + Date.now();
                config.id = id;
            }
            if (component.buttons) {
                component.buttons.id = config.id;
                window.__sharethis__.load(product, config);
            }
            if (_onShareThisLoaded) {
                _onShareThisLoaded();
            }
            onload.complete = true;
        }
    };
    window.onShareThisLoaded = onload;
    // load sharethis.js
    if (document.getElementById('sharethis-js')) {
        if (window.__sharethis__) {
            window.onShareThisLoaded();
        }
    }
    else {
        const script = document.createElement('script');
        script.setAttribute('id', 'sharethis-js');
        const params = {
            property: config.property || '',
            product: product,
            source: 'reactjs',
        };
        const query = Object.keys(params)
            .map((key) => key + '=' + params[key])
            .join('&');
        script.src = 'https://platform-api.sharethis.com/js/sharethis.js?' + query;
        script.async = true;
        document.body.appendChild(script);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9hZC5qcyIsInNvdXJjZVJvb3QiOiIvVXNlcnMvbHVjYXNtdWxsZXIvRG9jdW1lbnRzL0dpdEh1Yi9zaGFyZXRoaXMtYW5ndWxhci9wcm9qZWN0cy9zaGFyZXRoaXMtYW5ndWxhci9zcmMvIiwic291cmNlcyI6WyJsaWIvbG9hZC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFPQSxNQUFNLENBQUMsT0FBTyxXQUFXLFNBQVMsRUFBRSxPQUFPO0lBQ3pDLGNBQWM7SUFDZCxJQUFJLE1BQU0sR0FBRyxTQUFTLENBQUMsTUFBTSxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxDQUFDO0lBQ25ELE1BQU0sR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztJQUU1QyxlQUFlO0lBQ2YsTUFBTSxrQkFBa0IsR0FBRyxNQUFNLENBQUMsaUJBQWlCLENBQUM7SUFFcEQsSUFBSSxNQUFNLEdBQVEsR0FBRyxFQUFFO1FBQ3JCLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxFQUFFO1lBQ3BCLElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFO2dCQUNkLE1BQU0sRUFBRSxHQUFHLFlBQVksR0FBRyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7Z0JBQ3JDLE1BQU0sQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDO2FBQ2hCO1lBQ0QsSUFBSSxTQUFTLENBQUMsT0FBTyxFQUFFO2dCQUNyQixTQUFTLENBQUMsT0FBTyxDQUFDLEVBQUUsR0FBRyxNQUFNLENBQUMsRUFBRSxDQUFDO2dCQUNqQyxNQUFNLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsTUFBTSxDQUFDLENBQUM7YUFDNUM7WUFDRCxJQUFJLGtCQUFrQixFQUFFO2dCQUN0QixrQkFBa0IsRUFBRSxDQUFDO2FBQ3RCO1lBQ0QsTUFBTSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUM7U0FDeEI7SUFDSCxDQUFDLENBQUM7SUFFRixNQUFNLENBQUMsaUJBQWlCLEdBQUcsTUFBTSxDQUFDO0lBRWxDLG9CQUFvQjtJQUNwQixJQUFJLFFBQVEsQ0FBQyxjQUFjLENBQUMsY0FBYyxDQUFDLEVBQUU7UUFDM0MsSUFBSSxNQUFNLENBQUMsYUFBYSxFQUFFO1lBQ3hCLE1BQU0sQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1NBQzVCO0tBQ0Y7U0FBTTtRQUNMLE1BQU0sTUFBTSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDaEQsTUFBTSxDQUFDLFlBQVksQ0FBQyxJQUFJLEVBQUUsY0FBYyxDQUFDLENBQUM7UUFDMUMsTUFBTSxNQUFNLEdBQUc7WUFDYixRQUFRLEVBQUUsTUFBTSxDQUFDLFFBQVEsSUFBSSxFQUFFO1lBQy9CLE9BQU8sRUFBRSxPQUFPO1lBQ2hCLE1BQU0sRUFBRSxTQUFTO1NBQ2xCLENBQUM7UUFDRixNQUFNLEtBQUssR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQzthQUM5QixHQUFHLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO2FBQ3JDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNiLE1BQU0sQ0FBQyxHQUFHLEdBQUcscURBQXFELEdBQUcsS0FBSyxDQUFDO1FBQzNFLE1BQU0sQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDO1FBQ3BCLFFBQVEsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0tBQ25DO0FBQ0gsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIFdpbmRvdyB7XG4gICAgb25TaGFyZVRoaXNMb2FkZWQ6ICgpID0+IHZvaWQ7XG4gICAgX19zaGFyZXRoaXNfXzogYW55O1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChjb21wb25lbnQsIHByb2R1Y3QpIHtcbiAgLy8gbG9hZCBjb25maWdcbiAgbGV0IGNvbmZpZyA9IGNvbXBvbmVudC5jb25maWcgfHwgeyBlbmFibGVkOiB0cnVlIH07XG4gIGNvbmZpZyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoY29uZmlnKSk7XG5cbiAgLy8gbG9hZCBidXR0b25zXG4gIGNvbnN0IF9vblNoYXJlVGhpc0xvYWRlZCA9IHdpbmRvdy5vblNoYXJlVGhpc0xvYWRlZDtcblxuICBsZXQgb25sb2FkOiBhbnkgPSAoKSA9PiB7XG4gICAgaWYgKCFvbmxvYWQuY29tcGxldGUpIHtcbiAgICAgIGlmICghY29uZmlnLmlkKSB7XG4gICAgICAgIGNvbnN0IGlkID0gJ3NoYXJldGhpcy0nICsgRGF0ZS5ub3coKTtcbiAgICAgICAgY29uZmlnLmlkID0gaWQ7XG4gICAgICB9XG4gICAgICBpZiAoY29tcG9uZW50LmJ1dHRvbnMpIHtcbiAgICAgICAgY29tcG9uZW50LmJ1dHRvbnMuaWQgPSBjb25maWcuaWQ7XG4gICAgICAgIHdpbmRvdy5fX3NoYXJldGhpc19fLmxvYWQocHJvZHVjdCwgY29uZmlnKTtcbiAgICAgIH1cbiAgICAgIGlmIChfb25TaGFyZVRoaXNMb2FkZWQpIHtcbiAgICAgICAgX29uU2hhcmVUaGlzTG9hZGVkKCk7XG4gICAgICB9XG4gICAgICBvbmxvYWQuY29tcGxldGUgPSB0cnVlO1xuICAgIH1cbiAgfTtcblxuICB3aW5kb3cub25TaGFyZVRoaXNMb2FkZWQgPSBvbmxvYWQ7XG5cbiAgLy8gbG9hZCBzaGFyZXRoaXMuanNcbiAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaGFyZXRoaXMtanMnKSkge1xuICAgIGlmICh3aW5kb3cuX19zaGFyZXRoaXNfXykge1xuICAgICAgd2luZG93Lm9uU2hhcmVUaGlzTG9hZGVkKCk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGNvbnN0IHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICAgIHNjcmlwdC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3NoYXJldGhpcy1qcycpO1xuICAgIGNvbnN0IHBhcmFtcyA9IHtcbiAgICAgIHByb3BlcnR5OiBjb25maWcucHJvcGVydHkgfHwgJycsXG4gICAgICBwcm9kdWN0OiBwcm9kdWN0LFxuICAgICAgc291cmNlOiAncmVhY3RqcycsXG4gICAgfTtcbiAgICBjb25zdCBxdWVyeSA9IE9iamVjdC5rZXlzKHBhcmFtcylcbiAgICAgIC5tYXAoKGtleSkgPT4ga2V5ICsgJz0nICsgcGFyYW1zW2tleV0pXG4gICAgICAuam9pbignJicpO1xuICAgIHNjcmlwdC5zcmMgPSAnaHR0cHM6Ly9wbGF0Zm9ybS1hcGkuc2hhcmV0aGlzLmNvbS9qcy9zaGFyZXRoaXMuanM/JyArIHF1ZXJ5O1xuICAgIHNjcmlwdC5hc3luYyA9IHRydWU7XG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzY3JpcHQpO1xuICB9XG59XG4iXX0=